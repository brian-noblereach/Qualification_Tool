/* components.css - Assessment Views (Rubric + Evidence) */

/* ------------------------------
   1) Left Rubric Panel
------------------------------ */
.rubric-panel{
  background: var(--gray-50);
  border-right: 1px solid var(--gray-200);
  display:flex; flex-direction:column;
  overflow-y:auto; max-height: calc(100vh - 200px);
}
.panel-header{
  padding:1.5rem; background:#fff; border-bottom:1px solid var(--gray-200);
  display:flex; justify-content:space-between; align-items:center;
  position: sticky; top:0; z-index:10;
}
.panel-header h2{ font-size:1.125rem; color:var(--gray-800); }

/* AI score pill */
.ai-score-badge{
  display:flex; flex-direction:column; align-items:center;
  padding:.5rem 1rem; background: var(--primary-gradient);
  border-radius:.5rem; box-shadow: var(--shadow-md);
}
.badge-label{ font-size:.7rem; color:rgba(255,255,255,.9); text-transform:uppercase; font-weight:500; }
.badge-value{ font-size:1.75rem; font-weight:800; color:#fff; line-height:1; }

/* Scoring block */
.scoring-container{
  padding:1.5rem; background:#fff; margin:1rem; border-radius:.5rem; box-shadow: var(--shadow-sm);
}
.score-display{ text-align:center; font-size:3.5rem; font-weight:800; color:var(--primary); margin-bottom:1rem; line-height:1; }
.score-slider{
  width:100%; height:6px; -webkit-appearance:none; appearance:none;
  background: linear-gradient(to right, var(--danger) 0%, var(--warning) 33%, var(--primary) 66%, var(--success) 100%);
  border-radius:3px; outline:none;
}
.score-slider::-webkit-slider-thumb{
  -webkit-appearance:none; width:24px; height:24px; background:#fff; border:3px solid var(--primary);
  border-radius:50%; cursor:pointer; box-shadow: var(--shadow-lg); transition:all var(--transition-fast);
}
.score-slider::-webkit-slider-thumb:hover{ transform: scale(1.1); }
.score-slider::-moz-range-thumb{
  width:24px; height:24px; background:#fff; border:3px solid var(--primary);
  border-radius:50%; cursor:pointer; box-shadow: var(--shadow-lg); transition:all var(--transition-fast);
}
.score-labels{ display:flex; justify-content:space-between; margin-top:.5rem; font-size:.75rem; color:var(--gray-500); font-weight:500; }

/* Rubric description + rows */
.rubric-description{
  padding:1rem; background:#fff; margin: 1rem 0; border-radius:.5rem;
  border-left:4px solid var(--primary); box-shadow: var(--shadow-sm);
}
.rubric-description h3{ font-size:1rem; color:var(--primary); margin-bottom:.5rem; }
.rubric-description p{ font-size:.875rem; color:var(--gray-700); line-height:1.5; }

.rubric-table{ padding: 0; display:flex; flex-direction:column; gap:.5rem; }
.rubric-row{
  display:flex; align-items:flex-start; padding:.75rem; background:#fff; border-radius:.5rem;
  border-left:3px solid transparent; transition: all var(--transition-base); cursor:pointer;
}
.rubric-row:hover{ transform: translateX(2px); box-shadow: var(--shadow-sm); background: var(--gray-50); }
.rubric-row:focus{ outline:2px solid var(--primary); outline-offset:2px; }
.rubric-row.active{ border-left-color: var(--primary); background: linear-gradient(90deg, rgba(102,126,234,.05) 0%, #fff 100%); box-shadow: var(--shadow-md); }

.rubric-row .score{ font-weight:800; margin-right:1rem; min-width:40px; color:var(--gray-700); }
.rubric-row .criteria{ font-size:.813rem; color:var(--gray-600); line-height:1.4; }

/* Color coding by score */
.rubric-row[data-score="1"],
.rubric-row[data-score="2"],
.rubric-row[data-score="3"]{ border-left-color: var(--danger); }
.rubric-row[data-score="4"],
.rubric-row[data-score="5"]{ border-left-color: var(--warning); }
.rubric-row[data-score="6"],
.rubric-row[data-score="7"]{ border-left-color: var(--primary); }
.rubric-row[data-score="8"],
.rubric-row[data-score="9"]{ border-left-color: var(--success); }

/* Comments + submit */
.comment-container{
  padding:1rem 1.5rem; background:#fff; border-top:1px solid var(--gray-200); position:sticky; bottom:0;
}
.comment-container label{ display:block; font-weight:600; margin-bottom:.5rem; color:var(--gray-700); font-size:.875rem; }
.comment-container textarea{
  width:100%; padding:.625rem; border:2px solid var(--gray-200); border-radius:.5rem;
  resize:none; font-family:inherit; font-size:.875rem; transition: all var(--transition-base);
}
.comment-container textarea:focus{ outline:none; border-color:var(--primary); box-shadow:0 0 0 3px rgba(102,126,234,.1); }
.deviation-warning{
  padding:.5rem; background:#fef2f2; border-left:3px solid var(--danger); color:var(--danger);
  font-size:.813rem; margin:.5rem 0; border-radius:.25rem;
}

/* Polished primary action */
.submit-btn{
  display:block; width:100%; margin-top:1rem;
  padding:.9rem 1rem; border:none; border-radius:.75rem;
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  color:#fff; font-weight:700; letter-spacing:.02em;
  box-shadow: 0 8px 18px rgba(102,126,234,.28);
  transform: translateY(0);
  transition: transform .15s ease, box-shadow .15s ease, filter .15s ease;
}
.submit-btn:hover{ transform: translateY(-1px); box-shadow: 0 12px 24px rgba(102,126,234,.32); filter: brightness(1.02); }
.submit-btn:active{ transform: translateY(0); box-shadow: 0 6px 12px rgba(102,126,234,.24); }
.submit-btn:focus{ outline:none; box-shadow: 0 0 0 3px rgba(102,126,234,.25), 0 8px 18px rgba(102,126,234,.28); }
.submit-btn:disabled{ opacity:.6; cursor:not-allowed; filter:saturate(.8); }
.submit-btn.submitted{ background: var(--success); cursor: default; }
.submit-btn.submitted:hover{ transform:none; box-shadow:none; }

.score-completed{
  display:inline-flex; align-items:center; gap:.25rem;
  padding:.25rem .5rem; background: var(--success); color:#fff;
  border-radius:.25rem; font-size:.75rem; font-weight:600;
}

/* ------------------------------
   2) Right Evidence Panel
------------------------------ */
.evidence-panel{ display:flex; flex-direction:column; background:#fff; overflow:hidden; }
.panel-content{
  flex:1; overflow-y:auto;
  padding: 0 1.5rem 1.5rem; /* no top padding: sticky tabs sit at top */
  position:relative; z-index:1;
}

/* Sticky inner tabs across full width of right column */
.evidence-panel .view-tabs{
  position: sticky; top:0; z-index:5; background:#fff;
  padding: .5rem 1.5rem; margin: 0 0 .75rem 0;
  display:grid; grid-template-columns: repeat(3,1fr); gap:0;
  border-bottom:1px solid var(--gray-200); box-shadow: 0 1px 0 rgba(0,0,0,.04);
}
.view-tabs .tab{
  border:none; border-radius:0; background:transparent; color:var(--gray-600);
  padding:.75rem 0; font-size:.95rem; font-weight:600; text-align:center;
  border-bottom:3px solid transparent;
}
.view-tabs .tab.active{ color:var(--primary); border-bottom-color: var(--primary); }

/* ------------------------------
   3) Cards, Metrics & Reasoning
------------------------------ */
.key-metrics{ display:grid; grid-template-columns: repeat(auto-fit, minmax(150px,1fr)); gap:1rem; margin-bottom:1.5rem; }
.metric-card{ background:var(--gray-50); border:1px solid var(--gray-200); border-radius:.5rem; padding:1rem; }
.metric-card.full-width{ grid-column: 1 / -1; }
.metric-card label{ letter-spacing:.05em; color:var(--gray-500); }
.metric-card value{ display:block; margin-top:.35rem; font-size:1.35rem; font-weight:800; color:var(--gray-800); }

.ai-reasoning{
  padding:1rem; background: linear-gradient(135deg, rgba(102,126,234,.03) 0%, rgba(118,75,162,.03) 100%);
  border:1px solid rgba(102,126,234,.2); border-radius:.5rem; margin-bottom:1.5rem;
}
.reasoning-header{ display:flex; align-items:center; gap:.5rem; margin-bottom:.75rem; }
.ai-badge{
  width:28px; height:28px; background: var(--primary-gradient); color:#fff; border-radius:50%;
  display:flex; align-items:center; justify-content:center; font-size:.75rem; font-weight:800;
}
.ai-reasoning p{ font-size:.875rem; color:var(--gray-700); line-height:1.6; }

/* Evidence grid */
.evidence-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(250px,1fr)); gap:1rem; margin-bottom:1.5rem; }
.evidence-card{ padding:1rem; border-radius:.5rem; border-left:3px solid; }
.evidence-card.strengths{ background:#f0fdf4; border-color: var(--success); }
.evidence-card.limitations{ background:#fef2f2; border-color: var(--danger); }
.evidence-card.risks{ background:#fefce8; border-color: var(--warning); }
.evidence-card.opportunities{ background:#eff6ff; border-color: var(--info); }
.evidence-card h4{ font-size:.875rem; font-weight:600; margin-bottom:.75rem; color:var(--gray-800); }
.evidence-card ul{ list-style:none; padding:0; }
.evidence-card li{
  padding:.375rem 0; font-size:.813rem; color:var(--gray-700); line-height:1.5;
  padding-left:1rem; position:relative;
}
.evidence-card li:before{ content:"â€¢"; position:absolute; left:0; font-weight:700; color:inherit; opacity:.5; }

/* Keep bullets nicely inside rounded containers on generic .card */
.panel-content .card ul{ margin:0; padding-left:1.25rem; list-style:disc; }
.panel-content .card li{ line-height:1.6; }

/* ------------------------------
   4) Detail sections & Competitors
------------------------------ */
.detail-section{ margin-bottom:2rem; }
.detail-section h3{
  font-size:1.125rem; color:var(--gray-800); margin-bottom:1rem;
  padding-bottom:.5rem; border-bottom:2px solid var(--gray-200);
}
.detail-section p{ line-height:1.6; color:var(--gray-700); margin-bottom:1rem; }
.detail-section ul{ list-style:none; padding:0; }
.detail-section li{
  padding:.75rem; margin-bottom:.5rem; background:var(--gray-50);
  border-left:3px solid var(--primary); border-radius:.25rem; font-size:.875rem;
  line-height:1.6; color:var(--gray-700);
}

#competitorBreakdown{ display:grid; grid-template-columns: repeat(auto-fit, minmax(120px,1fr)); gap:1rem; }
.competitor-type{ padding:1rem; background:#fff; border:1px solid var(--gray-200); border-radius:.5rem; text-align:center; }
.competitor-type .type-label{ font-size:.75rem; color:var(--gray-500); text-transform:uppercase; margin-bottom:.5rem; }
.competitor-type .type-count{ font-size:2rem; font-weight:800; color:var(--primary); }

.data-quality-section{ margin-bottom:2rem; padding:1rem; background:var(--gray-50); border-radius:.5rem; }
.data-quality-section h3{ font-size:1rem; color:var(--gray-800); margin-bottom:1rem; }
.confidence-meter{ display:flex; align-items:center; gap:1rem; }
.confidence-bar{
  flex:1; height:1rem; background: linear-gradient(90deg, var(--danger) 0%, var(--warning) 50%, var(--success) 100%);
  border-radius:.5rem; position:relative; overflow:hidden;
}
.confidence-bar::before{ content:""; position:absolute; top:0; right:0; bottom:0; background:var(--gray-200); transition: width var(--transition-slow); }
.confidence-value{ font-weight:800; font-size:1.125rem; color:var(--gray-800); }

/* Competitor detail cards */
.competitor-detail-card{
  background:#fff; border:1px solid var(--gray-200); border-radius:.75rem;
  padding:1.5rem; margin-bottom:1.5rem; transition: all var(--transition-base);
}
.competitor-detail-card:hover{ box-shadow: var(--shadow-md); transform: translateY(-2px); }
.competitor-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem; }
.competitor-header h4{ font-size:1.125rem; color:var(--gray-800); margin:0; }

.size-badge{ padding:.25rem .75rem; border-radius:.375rem; font-size:.75rem; font-weight:600; text-transform:uppercase; }
.size-badge.size-large{ background: rgba(245,101,101,.1); color: var(--danger); }
.size-badge.size-mid-size, .size-badge.size-midsize{ background: rgba(237,137,54,.1); color: var(--warning); }
.size-badge.size-startup{ background: rgba(66,153,225,.1); color: var(--info); }
.size-badge.size-unknown{ background: var(--gray-200); color: var(--gray-600); }

.competitor-description{ font-size:.875rem; color:var(--gray-700); line-height:1.6; margin-bottom:1rem; }
.competitor-section{ margin-top:1rem; padding-top:1rem; border-top:1px solid var(--gray-100); }
.competitor-section strong{
  display:block; font-size:.813rem; color:var(--gray-600); margin-bottom:.5rem; text-transform:uppercase; letter-spacing:.05em;
}
.competitor-section p{ font-size:.813rem; color:var(--gray-700); line-height:1.5; }
.competitor-section ul{ list-style:none; padding:0; margin:0; }
.competitor-section li{ font-size:.813rem; color:var(--gray-700); padding:.25rem 0; padding-left:1rem; position:relative; }
.competitor-section li:before{ content:"â€¢"; position:absolute; left:0; color:var(--primary); }

/* ------------------------------
   5) Sources
------------------------------ */
.sources-note{
  margin-top:2rem; padding:1rem; background:var(--gray-50); border-radius:.5rem; border-left:3px solid var(--primary);
}
.sources-note p{ font-size:.875rem; color:var(--gray-700); margin-bottom:.5rem; }
.sources-note p:last-child{ margin-bottom:0; }
.data-quality-note{ font-size:.813rem; color:var(--gray-600); font-style:italic; }

.sources-table{
  width:100%; border-collapse:separate; border-spacing:0; background:#fff; border-radius:.5rem; overflow:hidden; box-shadow: var(--shadow-sm);
}
.sources-table thead{ background: var(--gray-100); }
.sources-table th{
  padding:.75rem; text-align:left; font-weight:600; font-size:.75rem; text-transform:uppercase; letter-spacing:.05em; color:var(--gray-600);
  border-bottom:2px solid var(--gray-200);
}
.sources-table td{ padding:1rem .75rem; font-size:.875rem; color:var(--gray-700); border-bottom:1px solid var(--gray-100); }
.sources-table tr:last-child td{ border-bottom:none; }
.sources-table tr:hover{ background: var(--gray-50); }
.sources-table a{ color:var(--primary); text-decoration:none; font-weight:500; }
.sources-table a:hover{ text-decoration:underline; }

/* ------------------------------
   6) Subtle content fade-in
------------------------------ */
.view-content{ animation: fadeIn var(--transition-base); }

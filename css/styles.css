/* styles.css - Base + Layout */

/* ------------------------------
   0) CSS Variables & Resets
------------------------------ */
:root {
  --primary: #667eea;
  --primary-dark: #5a67d8;
  --primary-light: #818cf8;
  --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

  --success: #48bb78;
  --success-light: #68d391;
  --warning: #ed8936;
  --warning-light: #f6ad55;
  --danger: #f56565;
  --danger-light: #fc8181;
  --info: #4299e1;

  --gray-50: #f9fafb;
  --gray-100: #f3f4f6;
  --gray-200: #e5e7eb;
  --gray-300: #d1d5db;
  --gray-400: #9ca3af;
  --gray-500: #6b7280;
  --gray-600: #4b5563;
  --gray-700: #374151;
  --gray-800: #1f2937;
  --gray-900: #111827;

  --shadow-sm: 0 1px 2px rgba(0,0,0,.05);
  --shadow-md: 0 4px 6px -1px rgba(0,0,0,.1);
  --shadow-lg: 0 10px 15px -3px rgba(0,0,0,.1);
  --shadow-xl: 0 20px 25px -5px rgba(0,0,0,.1);

  --transition-fast: 150ms ease;
  --transition-base: 200ms ease;
  --transition-slow: 300ms ease;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

/* ------------------------------
   1) Base Shell
------------------------------ */
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
  background: var(--primary-gradient);
  min-height: 100vh;
  padding: 1rem;
  color: var(--gray-900);
}

.container {
  max-width: 1600px;
  margin: 0 auto;
  background: #fff;
  border-radius: 1rem;
  box-shadow: var(--shadow-xl);
  overflow: hidden;
  min-height: calc(100vh - 2rem);
  display: flex;
  flex-direction: column;
}

/* Header */
.header {
  background: var(--primary-gradient);
  color: #fff;
  padding: 1rem 1.5rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.company-info h1 { font-size: 1.5rem; font-weight: 600; margin-bottom: .25rem; }
.company-meta { font-size: .875rem; opacity: .9; }
.header-actions { display: flex; align-items: center; gap: 1rem; }

/* ------------------------------
   2) Top-level Tabs (Competitive | Market | Summary)
------------------------------ */
.assessment-tabs{
  display: grid;
  grid-template-columns: repeat(3,1fr);
  width: 100%;
  background: var(--gray-50);
  border-bottom: 1px solid var(--gray-200);
}
.assessment-tab{
  padding: 1rem 1.5rem;
  border: none;
  border-bottom: 3px solid transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: .5rem;
  font-size: 1rem;
  font-weight: 600;
  color: var(--gray-600);
  background: transparent;
  transition: all var(--transition-base);
}
.assessment-tab:hover { background: var(--gray-100); }
.assessment-tab.active{
  background: #fff;
  border-bottom-color: var(--tab-accent, var(--primary));
  color: var(--tab-accent, var(--primary));
}
.assessment-tab.completed{ color: var(--tab-accent, var(--success)); }

/* Score chip next to tab label */
.tab-score{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 1.75rem;
  padding: .1rem .45rem;
  margin-left: .5rem;
  border-radius: .35rem;
  line-height: 1;
  font-weight: 700;
  color: #fff;
  background: var(--gray-400); /* JS sets to risk color */
}

/* ------------------------------
   3) Buttons
------------------------------ */
.btn-primary,.btn-secondary{
  padding: .625rem 1.25rem;
  border: none;
  border-radius: .5rem;
  font-weight: 500;
  font-size: .9rem;
  cursor: pointer;
  transition: all var(--transition-base);
  display: inline-flex;
  align-items: center;
  gap: .5rem;
}
.btn-primary{ background: var(--primary); color:#fff; }
.btn-primary:hover:not(:disabled){
  background: var(--primary-dark);
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}
.btn-secondary{ background: rgba(255,255,255,.2); color:#fff; }
.btn-secondary:hover{ background: rgba(255,255,255,.3); }
.btn-primary:disabled,.btn-secondary:disabled{ opacity:.5; cursor:not-allowed; transform:none!important; }
.btn-icon{ font-size: 1.125rem; }

/* ------------------------------
   4) Input Section
------------------------------ */
.input-section{ padding: 2rem; }
.input-grid{ max-width: 800px; margin: 0 auto; display:grid; grid-template-columns: 1fr; gap:1.5rem; }
.input-field label{ display:block; font-weight:600; margin-bottom:.5rem; color:var(--gray-700); font-size:.9rem; }
.input-field textarea{
  width:100%; padding:.75rem; border:2px solid var(--gray-200); border-radius:.5rem;
  resize: vertical; font-family: inherit; font-size:.9rem; transition: border-color var(--transition-base);
}
.input-field textarea:focus{ outline:none; border-color:var(--primary); box-shadow:0 0 0 3px rgba(102,126,234,.1); }
.field-helper{ margin-top:.25rem; font-size:.813rem; color:var(--gray-500); }
.input-actions{ text-align:center; margin-top:2rem; }
.analyze-btn{ padding:.875rem 2rem; font-size:1rem; }

/* ------------------------------
   5) Loading Modal
------------------------------ */
.loading-section{
  position: fixed; inset: 0; z-index: 1000;
  background: rgba(0,0,0,.7);
  display:flex; align-items:center; justify-content:center; padding:2rem;
}
.loading-modal{ background:#fff; padding:2rem; border-radius:1rem; box-shadow:var(--shadow-xl); max-width:500px; width:90%; }
.loading-header{ text-align:center; margin-bottom:2rem; }
.phase-indicators{ display:flex; align-items:center; justify-content:center; gap:.5rem; margin-bottom:1.5rem; }
.phase-indicator{ display:flex; align-items:center; gap:.5rem; padding:.5rem 1rem; background:var(--gray-100); border-radius:.5rem; font-size:.875rem; color:var(--gray-600); transition:all var(--transition-base); }
.phase-indicator.active{ background:var(--primary); color:#fff; }
.phase-indicator.complete{ background:var(--success); color:#fff; }
.phase-dot{ width:.5rem; height:.5rem; border-radius:50%; background:currentColor; }
.phase-connector{ width:2rem; height:2px; background:var(--gray-300); transition:background var(--transition-base); }
.phase-indicator.complete + .phase-connector{ background:var(--success); }

.loading-body{ text-align:center; }
.spinner{
  width:3rem; height:3rem; border:3px solid var(--gray-200); border-top-color:var(--primary);
  border-radius:50%; margin:0 auto 1.5rem; animation: spin 1s linear infinite;
}
.progress-bar-container{ width:100%; height:.5rem; background:var(--gray-200); border-radius:.25rem; margin:1.5rem auto; overflow:hidden; }
.progress-bar{ height:100%; background:var(--primary-gradient); transition: width var(--transition-slow); border-radius:.25rem; }
.status{ display:flex; justify-content:space-between; align-items:center; margin-top:1rem; font-size:.875rem; color:var(--gray-600); }
#loadingTitle{ font-size:1.5rem; color:var(--gray-800); margin-bottom:1.5rem; }

/* ------------------------------
   6) Main Layout Blocks
------------------------------ */
.two-panel-layout{ display:grid; grid-template-columns: 420px 1fr; height: calc(100vh - 200px); min-height: 600px; }
.assessment-section{ flex:1; overflow:hidden; }

/* Error */
.error-section{ display:flex; align-items:center; justify-content:center; padding:2rem; min-height:60vh; }
.error-content{ max-width:600px; width:100%; }
.error-content h2{ color:var(--danger); margin-bottom:1rem; display:flex; align-items:center; gap:.5rem; }
#errorDetailsWrapper{ margin-top:1rem; padding:1rem; background:var(--gray-50); border-radius:.5rem; }
#errorDetailsWrapper summary{ cursor:pointer; font-weight:600; color:var(--gray-700); }
#errorDetails{ margin-top:.5rem; padding:.5rem; background:#fff; border-radius:.25rem; font-size:.75rem; font-family:monospace; overflow-x:auto; color:var(--gray-600); }

/* ------------------------------
   7) Summary (final page)
------------------------------ */
.summary-layout{ padding:2rem; max-width:1200px; margin:0 auto; }
.summary-title{ font-size:1.75rem; color:var(--gray-800); margin-bottom:2rem; text-align:center; }

.summary-grid{ display:grid; grid-template-columns: 1fr 1fr; gap:2rem; margin-bottom:2rem; }
.summary-card{ background:var(--gray-50); padding:1.5rem; border-radius:.75rem; border:1px solid var(--gray-200); }
.summary-card h3{ font-size:1.125rem; color:var(--gray-800); margin-bottom:1rem; padding-bottom:.5rem; border-bottom:2px solid var(--gray-200); }

.summary-scores{ display:flex; gap:2rem; margin-bottom:1rem; }
.summary-score{ flex:1; }
.summary-score label{ display:block; font-size:.75rem; text-transform:uppercase; color:var(--gray-500); margin-bottom:.25rem; }
.summary-score value{ font-size:2rem; font-weight:800; color:var(--primary); }

.summary-justification{ padding:1rem; background:#fff; border-radius:.5rem; font-size:.875rem; color:var(--gray-700); line-height:1.6; min-height:80px; }

.summary-overall{ background:#fff; padding:1.5rem; border-radius:.75rem; border:2px solid var(--primary); margin-bottom:2rem; }
.summary-overall h3{ font-size:1.125rem; color:var(--primary); margin-bottom:1rem; }
.overall-metrics{ display:grid; grid-template-columns: repeat(3,1fr); gap:1.5rem; }
.overall-metric{ text-align:center; }
.overall-metric label{ display:block; font-size:.813rem; color:var(--gray-600); margin-bottom:.25rem; }
.overall-metric value{ font-size:1.5rem; font-weight:600; color:var(--gray-800); }
.summary-actions{ text-align:center; }

/* ------------------------------
   8) Utilities & A11y
------------------------------ */
.no-data{ opacity:.6; font-style:italic; color:var(--gray-500); }
.validation-message{
  color:var(--danger); font-size:.813rem; margin-top:.25rem;
  padding:.25rem .5rem; background: rgba(245,101,101,.1); border-left:2px solid var(--danger); border-radius:.25rem;
}
.two-col{ display:grid; grid-template-columns:1fr 1fr; gap:1.25rem; align-items:start; }
.two-col .card{ background:#fff; border:1px solid var(--gray-200); border-radius:.5rem; padding:1rem; }
.card{ background:#fff; border:1px solid var(--gray-200); border-radius:.75rem; padding:1rem; box-shadow:var(--shadow-sm); }

*:focus-visible{ outline:2px solid var(--primary); outline-offset:2px; }
.skip-to-content{ position:absolute; top:-40px; left:0; background:var(--primary); color:#fff; padding:.5rem 1rem; text-decoration:none; z-index:100000; }
.skip-to-content:focus{ top:0; }
.sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border-width:0; }

/* ------------------------------
   9) Animations
------------------------------ */
@keyframes spin { to { transform: rotate(360deg); } }
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.5} }
@keyframes slideIn { from{opacity:0; transform:translateY(20px)} to{opacity:1; transform:none} }
@keyframes fadeIn { from{opacity:0} to{opacity:1} }
.view-content{ animation: fadeIn var(--transition-base); }
.card{ animation: slideIn var(--transition-base); }

/* ------------------------------
   10) Responsive
------------------------------ */
@media (max-width:1200px){
  .two-panel-layout{ grid-template-columns: 380px 1fr; }
}
@media (max-width:1024px){
  .container{ margin:0; border-radius:0; min-height:100vh; }
  body{ padding:0; }
  .two-panel-layout{ grid-template-columns: 1fr; height:auto; }
  .summary-grid{ grid-template-columns: 1fr; }
}
@media (max-width:768px){
  .header{ flex-direction:column; gap:1rem; text-align:center; }
  .two-col{ grid-template-columns: 1fr; }
  .header-actions{ flex-direction:column; gap:.5rem; width:100%; }
  .header-actions button{ width:100%; }
}

/* ------------------------------
   11) Print
------------------------------ */
@media print{
  .header-actions, .btn, .tab, .slider-row, .rubric-controls { display:none !important; }
  .card{ page-break-inside:avoid; border:1px solid #ddd; margin-bottom:1rem; }
  body{ background:#fff; padding:0; }
  .container{ box-shadow:none; border-radius:0; }
}
